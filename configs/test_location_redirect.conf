# Test Configuration: Internal Location Redirects
# Valid: Internal redirects without loops

server {
    listen 9095;
    root ./www;
    server_name test.local;

    # Old URL redirects to new URL (internal redirect)
    location /old-page {
        return /new-page;
    }

    # New page serves content
    location /new-page {
        methods GET;
        root ./www;
        index index.html;
    }

    # Chain of redirects (A -> B -> C)
    location /redirect-a {
        return /redirect-b;
    }

    location /redirect-b {
        return /redirect-c;
    }

    location /redirect-c {
        methods GET;
        root ./www;
        index index.html;
    }

    # External redirect still works
    location /external {
        return https://www.google.com;
    }
}
